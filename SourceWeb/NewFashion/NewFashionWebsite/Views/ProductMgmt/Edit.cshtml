@{
    ViewBag.Title = "Sửa thông tin sản phẩm";
    Layout = "~/Views/Shared/_LayoutAdmin.cshtml";    
    @Styles.Render("~/Content/css-admin-custom2")
    @Scripts.Render("~/bundles/jquery")
    @Scripts.Render("~/bundles/jqueryui")
    @Styles.Render("~/Content/themes/base/css")
    @Scripts.Render("~/bundles/modernizr")
    
    @model NewFashionBLL.product
}

<h2>Sửa thông tin sản phẩm</h2>

@if (Model != null)
{
    
using (Html.BeginForm("Edit", "ProductMgmt", FormMethod.Post))
{
    @Html.ValidationSummary(true)        
<table width="70%">
    <tr>
        <td width="30%" align="left" valign="top">
            Mã sản phẩm:
        </td>
       <td width="70%" align="left" valign="top">
           <b>
               @Model.proid
           </b>
       </td>
    </tr>
    <tr>
        <td width="30%" align="left" valign="top">
            Tên sản phẩm:
        </td>
       <td width="70%" align="left" valign="top">
           <b>
               @Html.TextBoxFor(m => m.proname, new {@class = "form-control"})&nbsp @Html.ValidationMessageFor(m => m.proname)
           </b>
       </td>
    </tr>
     <tr>
        <td width="30%" align="left" valign="top">
            Giới thiệu sản phẩm:
        </td>
       <td width="70%" align="left" valign="top">
           <div style="max-height: 300px; overflow-y: scroll; word-wrap: break-word;">
               @Html.TextAreaFor(m => m.prointro, new {@class = "form-control"})&nbsp @Html.ValidationMessageFor(m => m.prointro)
           </div>
       </td>
    </tr>
    <tr>
        <td width="30%" align="left" valign="top">
            Bài viết về sản phẩm:
        </td>
       <td width="70%" align="left" valign="top">
           <div style="max-height: 300px; overflow-y: scroll; word-wrap: break-word;">
               @Html.TextAreaFor(m => m.proarticle, new {@class = "form-control"})&nbsp @Html.ValidationMessageFor(m => m.proarticle)
           </div>
       </td>
    </tr>
    <tr>
        <td width="30%" align="left" valign="top">
            Số lượng hàng:
        </td>
       <td width="70%" align="left" valign="top">
           <b>
               @Html.TextBoxFor(m => m.proquantity, new {@class = "form-control"})&nbsp @Html.ValidationMessageFor(m => m.proquantity)
           </b>
       </td>
    </tr>
    <tr>
        <td width="30%" align="left" valign="top">
            Đơn giá:
        </td>
       <td width="70%" align="left" valign="top">
           <b>
               @Html.TextBoxFor(m => m.prostockprice, new {@class = "form-control"})&nbsp @Html.ValidationMessageFor(m => m.prostockprice)
           </b>
       </td>
    </tr>
    <tr>
        <td width="30%" align="left" valign="top">
            Mã khuyến mãi:
        </td>
       <td width="70%" align="left" valign="top">
           <b>
               @Html.TextBoxFor(m => m.discountid, new {@class = "form-control"})&nbsp @Html.ValidationMessageFor(m => m.discountid)
           </b>
       </td>
    </tr>
     <tr>
        <td width="30%" align="left" valign="top">
            Chất liệu:
        </td>
       <td width="70%" align="left" valign="top">
           <b>
               @Html.TextBoxFor(m => m.materialid, new {@class = "form-control"})&nbsp @Html.ValidationMessageFor(m => m.materialid)
           </b>
       </td>
    </tr>
    <tr>
        <td width="30%" align="left" valign="top">
            Nhãn hiệu:
        </td>
       <td width="70%" align="left" valign="top">
           <b>
               @Html.TextBoxFor(m => m.brandid, new {@class = "form-control"})&nbsp @Html.ValidationMessageFor(m => m.brandid)
           </b>
       </td>
    </tr>
    <tr>
        <td width="30%" align="left" valign="top">
            Màu sắc:
        </td>
       <td width="70%" align="left" valign="top">
           <b>
              @Html.TextBoxFor(m => m.colorid, new {@class = "form-control"})&nbsp @Html.ValidationMessageFor(m => m.colorid)
           </b>
       </td>
    </tr>
    <tr>
        <td width="30%" align="left" valign="top">
            Size:
        </td>
       <td width="70%" align="left" valign="top">
           <b>
               @Html.TextBoxFor(m => m.sizeid, new {@class = "form-control"})&nbsp @Html.ValidationMessageFor(m => m.sizeid)
           </b>
       </td>
    </tr>
    <tr>
        <td width="30%" align="left" valign="top">
            Ngày nhập:
        </td>
       <td width="70%" align="left" valign="top">
           <b>
               @Html.TextBoxFor(m => m.datearrival, new {@class = "form-control"})&nbsp @Html.ValidationMessageFor(m => m.datearrival)
           </b>
       </td>
    </tr>
    <tr>
        <td width="30%" align="left" valign="top">
            Hình ảnh:
        </td>
       <td width="70%" align="left" valign="top">
           @foreach (var img in Model.image_product.ToList())
           {
               <div id="image-@img.id" style="float: left; margin: 5px 15px 5px 5px;">
                   <div style="float: right; position:absolute; margin: 5px 5px 5px 5px;">
                       <a id="delete" onclick="deleteImage(@Model.proid, @img.id)" class="btn btn-danger btn-sm btn-flat btn-rect" data-original-title="" title="">
                           <i class="glyphicon glyphicon-remove"></i>
                       </a>
                   </div>
                   <img src="@Url.Content(img.imagetb1.url)" />
               </div>
           }
           
       </td>
    </tr>
    <tr>
        <td width="30%" align="left" valign="top">
            
        </td>
        <td width="70%" align="left" valign="top">
            <b>
                <input type="submit" value="Lưu thay đổi" class="submit" />
                <input type="button" value="Quay lại" class="submit" onclick="history.back(-1)" />
            </b>
        </td>
    </tr>
</table>
    }
    <script>
        function deleteImage(proid, imageid) {
            $.ajax({
                url: '/ProductMgmt/DeleteImage',
                type: 'POST',
                data: { proid: proid, imageid: imageid },
                success: function (mydata) {
                    console.log(mydata);
                    $("#image-" + imageid).fadeOut();
                },
                error: function () {
                    alert("Error");
                }
            });
        }
    </script>
}